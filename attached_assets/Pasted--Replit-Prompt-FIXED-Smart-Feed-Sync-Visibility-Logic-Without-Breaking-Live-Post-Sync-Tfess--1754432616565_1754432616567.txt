ğŸ› ï¸ Replit Prompt â€” FIXED Smart Feed Sync + Visibility Logic Without Breaking Live Post Sync (Tfess)

ğŸ“Œ What I Need Replit to Do:

I need a fixed, smart feed distribution and sync system for Tfess that works without breaking the ability for new posts to show up across devices. The version I previously used created a bug where posts wouldnâ€™t show live on other devices or only showed in Trending. I want the updated version below to fix that and work reliably for all users, across all pages.

ğŸ”„ Part 1: Smart Post Distribution (Anti-Flooding)

âœ… Main Goals:

Avoid flooding the screen with too many new posts.

But NEVER prevent new posts from showing up on other devices or across pages.

âœ”ï¸ Updated Logic:

Show 30 max new posts per refresh.

If more than 30 exist, queue them for next refresh.

At the bottom of the 30-post limit, add a button that says:

"Refresh to see more posts"

Do not block other posts from being seen due to batching.

Every new post should still be accessible to other users in normal time.

ğŸš« DO NOT delay or hide new posts in a way that causes them to only show in Trending or disappear across devices.

ğŸ”„ Live Posting Behavior

âœ… Maintain:

New posts DO NOT automatically appear in the feed.

New posts should only show when the user taps:

â€œRefreshâ€ or

â€œğŸ”„ X New Posts â€“ Tap to Viewâ€

âš ï¸ Fix the bug that prevented new posts from appearing at all after refresh when posted from a different device.

Ensure refresh and live updates work across all devices.

ğŸ¯ Part 2: Post Visibility Fairness Logic

âœ… Implement logic so that when 100+ users post:

Break them into small chunks (~10â€“15).

Randomly assign subsets to users so everyone gets seen.

Make this logic apply to the "New" section on Home Page only.

Keep time-based order mixed with light randomization â€” but never lose posts.

âœ¨ Part 3: Posts Needing Attention Logic (Visibility Boost)

âœ… Updated Rule:

When feed is refreshed:

10â€“20% of the shown posts should have 0 reactions or 0 comments

10â€“20% of the shown posts should have low reactions/comments

Do not make them dominate â€” just include them subtly.

Apply this to the â€œNewâ€ section only.

âœ… Part 4: Real-Time Interactions (Across Devices)

Make sure the following update LIVE across all devices immediately:

Poll votes

Emoji reactions

Comment counts

Live comment threads

Updated usernames and profile pics

Use Firebase onSnapshot or WebSocket-style listeners.

ğŸ”§ Fix the bug where interactions or new posts werenâ€™t updating unless users manually refreshed.

âœ… Part 5: Cross-Device, Multi-Page Behavior

This system MUST:

Prevent stale data (no lagging usernames or profile pics).

Prevent jittery screen behavior.

Be fast and smooth on mobile (use lazy loading/virtual lists).

âœ… Apply the system to:

Home Page

Daily Spill

All Community Topic Pages

Profile Feed

ğŸš« DO NOT apply batching, refresh, or smart visibility logic to:

Trending section (Home Page)

Spill of the Day section (Daily Spill Page)

âœ… Every Community Topic must include a visible refresh button in the feed area.